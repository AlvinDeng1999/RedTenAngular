<div class="container">
  <header class="pageHeader">
    <h3 class="float-left">My Games </h3>
    <button type="button" class="btn btn-primary float-right" data-toggle="modal" (click)="addGame()">New Game</button>
  </header>
  <div *ngIf="editRoundToggle">
    <form>
      <div class="form-group">
        <label for="roundTime">Time</label>  
      </div>
    </form>
  </div>
  <div *ngIf="open.id != 0" style="padding-top: 50px">
    <h4>Current Game <button *ngIf="open.id != 0" type="button" class="btn btn-sm btn-primary" (click)="toggleRound()">New Round</button></h4>
    <ag-grid-angular style="width: 100%; height: 93px;"
                     class="ag-theme-alpine"
                     [rowData]="rowDataOpen"
                     [columnDefs]="columnDefs"
                     (gridReady)="onGridReady($event)">
    </ag-grid-angular>
    <div *ngIf="gameEditToggle" style="padding-top: 10px" >
      <form (ngSubmit)="saveEdit()">
        <div class="form-group">
          <label for="editLocation">Location</label>
          <input class="form-control" type="text" id="editLocation" name="editLocation" value=open.location [(ngModel)]="open.location" #editLocation="ngModel" />
        </div>
        <div class="form-group">
          <label for="editDate">Date</label>
          <input class="form-control" type="datetime-local" id="editDate" name="editDate" value="open.date" [(ngModel)]="open.date" #editDate="ngModel" />
        </div>
        <div class="form-group">
          <button *ngIf="gameEditToggle" type="submit" class="btn btn-sm btn-primary float-left">Save</button>
          <button *ngIf="gameEditToggle" type="button" class="btn btn-sm btn-outline-danger float-right" (click)="editToggle()">Cancel</button>
        </div>
      </form>
    </div>
    <div class="form-group" style="padding-top: 10px">
      <button *ngIf="!gameEditToggle" type="button" class="btn btn-sm btn-primary float-left" (click)="editToggle()">Edit Game</button>
      <button *ngIf="!gameEditToggle" type="button" class="btn btn-sm btn-outline-danger float-right" data-toggle="modal" (click)="closeGame()">Close Game</button>
    </div>

  </div>
  <div *ngIf="closed.length > 0" class="reduced-font flex-grow-1" [@fadeInOut] style="padding-top: 50px">
    <h4>Past Games</h4>
    <ag-grid-angular style="width: 100%; height: 300px;"
                     class="ag-theme-alpine"
                     [rowData]="rowData"
                     [columnDefs]="columnDefs"
                     [defaultColDef]="defaultColDef"
                     (gridReady)="onGridReady($event)">
    </ag-grid-angular>
  </div>
</div>



<div class="modal fade" bsModal #closeModal="bs-modal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Close Game?</h3>
      </div>
      <div class="modal-body">
        <p style="color: red;">This game's status will be set to closed. You will no longer be able to make any changes to this game</p>
        <div class="form-group">
          <button type="button" class="float-left btn btn-danger" (click)="confirmClose()">Confirm</button>
          <button type="button" class="float-right btn btn-outline-secondary">Cancel</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" bsModal #gameModal="bs-modal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h3>New Game</h3>
      </div>
      <div class="modal-body">
        <form *ngIf="formResetToggle" name="gameEditorForm" #f="ngForm" (ngSubmit)="saveGame()">
          
          <div class="form-group">
            <label for="gameLocation">Location</label>
            <input class="form-control" type="text" id="gameLocation" name="gameLocation" placeholder="Enter Location" [(ngModel)]="gameEdit.location" #gameLocation="ngModel"/>
          </div>
          <div class="form-group">
            <label for="gameDate">Date</label>
            <input class="form-control" type="datetime-local" id="gameDate" name="gameDate" [(ngModel)]="gameEdit.date" #gameDate="ngModel"/>
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-primary btn-left">Save</button>
            <button type="button" class="btn btn-secondary btn-right" (click)="cancelGame()">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
